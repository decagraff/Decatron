[2025-10-22 13:25:13 INF] === DECATRON STARTUP DEBUG ===
[2025-10-22 13:25:13 INF] Decatron starting up...
[2025-10-22 13:25:13 INF] Registrando Controllers...
[2025-10-22 13:25:13 INF] Registrando Repositories...
[2025-10-22 13:25:13 INF] Registrando Core Services...
[2025-10-22 13:25:13 INF] Registrando EventSub Service...
[2025-10-22 13:25:13 INF] IEventSubService registrado correctamente
[2025-10-22 13:25:13 INF] Registrando Twitch Services...
[2025-10-22 13:25:13 INF] Construyendo aplicación...
[2025-10-22 13:25:13 INF] === CONFIGURANDO PIPELINE ===
[2025-10-22 13:25:13 INF] Configurando Routing...
[2025-10-22 13:25:13 INF] Mapeando Razor Pages...
[2025-10-22 13:25:13 INF] Mapeando Controllers...
[2025-10-22 13:25:13 INF] Application configured, starting services...
[2025-10-22 13:25:14 INF] Comandos base cargados: 4
[2025-10-22 13:25:14 DBG]   - !hola
[2025-10-22 13:25:14 DBG]   - !title
[2025-10-22 13:25:14 DBG]   - !t
[2025-10-22 13:25:14 DBG]   - !game
[2025-10-22 13:25:14 ERR] Error starting services
System.InvalidOperationException: Channel ID is missing in TwitchSettings
   at Decatron.Services.TwitchBotService.ValidateSettings() in C:\Users\User\Decatron\Decatron.Services\TwitchBotService.cs:line 69
   at Decatron.Services.TwitchBotService..ctor(TwitchClient client, ILogger`1 logger, IConfiguration configuration, IOptions`1 twitchSettings, IServiceProvider serviceProvider, IMessageSender messageSender, TwitchApiService apiService, CommandService commandService) in C:\Users\User\Decatron\Decatron.Services\TwitchBotService.cs:line 60
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithManyArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Program.<Main>$(String[] args) in C:\Users\User\Decatron\Program.cs:line 202
[2025-10-22 13:25:14 FTL] Application terminated unexpectedly
System.InvalidOperationException: Channel ID is missing in TwitchSettings
   at Decatron.Services.TwitchBotService.ValidateSettings() in C:\Users\User\Decatron\Decatron.Services\TwitchBotService.cs:line 69
   at Decatron.Services.TwitchBotService..ctor(TwitchClient client, ILogger`1 logger, IConfiguration configuration, IOptions`1 twitchSettings, IServiceProvider serviceProvider, IMessageSender messageSender, TwitchApiService apiService, CommandService commandService) in C:\Users\User\Decatron\Decatron.Services\TwitchBotService.cs:line 60
   at InvokeStub_TwitchBotService..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithManyArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Program.<Main>$(String[] args) in C:\Users\User\Decatron\Program.cs:line 243
[2025-10-22 13:25:51 INF] === DECATRON STARTUP DEBUG ===
[2025-10-22 13:25:51 INF] Decatron starting up...
[2025-10-22 13:25:51 INF] Registrando Controllers...
[2025-10-22 13:25:51 INF] Registrando Repositories...
[2025-10-22 13:25:51 INF] Registrando Core Services...
[2025-10-22 13:25:51 INF] Registrando EventSub Service...
[2025-10-22 13:25:51 INF] IEventSubService registrado correctamente
[2025-10-22 13:25:51 INF] Registrando Twitch Services...
[2025-10-22 13:25:51 INF] Construyendo aplicación...
[2025-10-22 13:25:52 INF] === CONFIGURANDO PIPELINE ===
[2025-10-22 13:25:52 INF] Configurando Routing...
[2025-10-22 13:25:52 INF] Mapeando Razor Pages...
[2025-10-22 13:25:52 INF] Mapeando Controllers...
[2025-10-22 13:25:52 INF] Application configured, starting services...
[2025-10-22 13:25:52 INF] Comandos base cargados: 4
[2025-10-22 13:25:52 DBG]   - !hola
[2025-10-22 13:25:52 DBG]   - !title
[2025-10-22 13:25:52 DBG]   - !t
[2025-10-22 13:25:52 DBG]   - !game
[2025-10-22 13:25:52 INF] === Configuration Loaded ===
[2025-10-22 13:25:52 INF] Twitch Bot Username: decatrontest
[2025-10-22 13:25:52 INF] Twitch Client ID: td8vr15lzmvbei4qj4bbd3u4m5jovu
[2025-10-22 13:25:52 INF] Channel ID: 
[2025-10-22 13:25:52 INF] EventSub Webhook URL: https://localhost:7282/api/eventsub/webhook
[2025-10-22 13:25:52 INF] ===========================
[2025-10-22 13:25:52 INF] === APLICACIÓN LISTA ===
[2025-10-22 13:25:52 INF] Application ready, listening on configured ports
[2025-10-22 13:25:52 INF] EventSub configurado para webhooks en: /api/eventsub/webhook
[2025-10-22 13:25:52 INF] Endpoints de debug disponibles:
[2025-10-22 13:25:52 INF]   - GET /debug/ping
[2025-10-22 13:25:52 INF]   - GET /debug/controllers
[2025-10-22 13:25:52 INF]   - GET /api/eventsub/test (si TestEventSubController está funcionando)
[2025-10-22 13:25:52 INF] ========================
[2025-10-22 13:25:52 INF] Iniciando TwitchBotService...
[2025-10-22 13:25:52 WRN] TwitchBotService ya está en ejecución
[2025-10-22 13:25:52 INF] Token del bot obtenido desde BD: 8a075o60ya...
[2025-10-22 13:25:52 INF] TwitchBotService inicializado - Bot: decatrontest
[2025-10-22 13:25:53 INF] Index page accessed
[2025-10-22 13:25:53 INF] Cliente Twitch conectado exitosamente
[2025-10-22 13:25:53 INF] Found 1 channels with bot enabled
[2025-10-22 13:25:53 INF] Conectando a 1 canales desde configuración de settings
[2025-10-22 13:25:53 DBG] Micro comando registrado: !jc -> just chatting para canal decatheonlyone
[2025-10-22 13:25:53 DBG] Micro comando registrado: !js -> just chatting para canal anthonydeca
[2025-10-22 13:25:53 DBG] Micro comando registrado: !fsdg -> sgdf para canal anthonydeca
[2025-10-22 13:25:53 DBG] Micro comando registrado: !sdfg -> sdfg para canal anthonydeca
[2025-10-22 13:25:53 DBG] Micro comando registrado: !sdgf -> sdfg para canal anthonydeca
[2025-10-22 13:25:53 DBG] Micro comando registrado: !ssdfgdfs -> sdfgdf para canal anthonydeca
[2025-10-22 13:25:53 DBG] Micro comando registrado: !sdfgdf -> fdsgdf para canal anthonydeca
[2025-10-22 13:25:53 DBG] Micro comando registrado: !dfsgsdfg -> dfsgdfg para canal anthonydeca
[2025-10-22 13:25:53 INF] Micro comandos cargados: 8
[2025-10-22 13:25:53 INF] Conectado al canal: decatheonlyone
[2025-10-22 13:25:53 INF] Bot conectado a 1 canales habilitados
[2025-10-22 13:25:53 INF] TwitchBotService iniciado correctamente
[2025-10-22 13:25:54 INF] IRC conectado exitosamente
[2025-10-22 13:25:54 INF] Bot unido al canal: decatheonlyone
[2025-10-22 13:25:59 INF] Login page accessed
[2025-10-22 13:26:01 INF] Generated login URL for Twitch
[2025-10-22 13:26:01 INF] Redirecting to Twitch login
[2025-10-22 13:26:02 INF] Auth callback received - Error: 
[2025-10-22 13:26:02 INF] Exchanging code for token...
[2025-10-22 13:26:03 INF] Successfully exchanged code for token
[2025-10-22 13:26:03 INF] Fetching user information...
[2025-10-22 13:26:04 INF] Retrieved user info for anthonydeca
[2025-10-22 13:26:04 INF] Authenticating user: anthonydeca
[2025-10-22 13:26:04 INF] User updated: anthonydeca
[2025-10-22 13:26:04 INF] Updated existing user: anthonydeca
[2025-10-22 13:26:04 INF] Connecting bot to channel: anthonydeca
[2025-10-22 13:26:04 INF] Unido al canal: anthonydeca
[2025-10-22 13:26:04 INF] User anthonydeca authenticated successfully
[2025-10-22 13:26:04 INF] Dashboard accessed by user: anthonydeca
[2025-10-22 13:26:04 INF] Bot unido al canal: anthonydeca
[2025-10-22 13:26:05 INF] User 1 can manage 1 channels
[2025-10-22 13:26:15 INF] Settings page loaded for user: anthonydeca
[2025-10-22 13:26:16 INF] User 1 can manage 1 channels
[2025-10-22 13:26:16 INF] Usuario anthonydeca accedió a la gestión de comandos por defecto
[2025-10-22 13:26:17 INF] User 1 can manage 1 channels
[2025-10-22 13:26:17 INF] Usuario anthonydeca accedió a la gestión de micro comandos
[2025-10-22 13:26:17 INF] User 1 can manage 1 channels
[2025-10-22 13:26:18 INF] Usuario anthonydeca accedió a la gestión de comandos por defecto
[2025-10-22 13:26:18 INF] User 1 can manage 1 channels
[2025-10-22 13:26:19 INF] Settings page loaded for user: anthonydeca
[2025-10-22 13:26:19 INF] User 1 can manage 1 channels
[2025-10-22 13:54:19 INF] === DECATRON STARTUP DEBUG ===
[2025-10-22 13:54:19 INF] Decatron starting up...
[2025-10-22 13:54:20 INF] Registrando Controllers...
[2025-10-22 13:54:20 INF] Registrando Repositories...
[2025-10-22 13:54:20 INF] Registrando Core Services...
[2025-10-22 13:54:20 INF] Registrando EventSub Service...
[2025-10-22 13:54:20 INF] IEventSubService registrado correctamente
[2025-10-22 13:54:20 INF] Registrando Twitch Services...
[2025-10-22 13:54:20 INF] Construyendo aplicación...
[2025-10-22 13:54:20 INF] === CONFIGURANDO PIPELINE ===
[2025-10-22 13:54:20 INF] Configurando Routing...
[2025-10-22 13:54:20 INF] Mapeando Razor Pages...
[2025-10-22 13:54:20 INF] Mapeando Controllers...
[2025-10-22 13:54:20 INF] Application configured, starting services...
[2025-10-22 13:54:20 INF] Comandos base cargados: 4
[2025-10-22 13:54:20 DBG]   - !hola
[2025-10-22 13:54:20 DBG]   - !title
[2025-10-22 13:54:20 DBG]   - !t
[2025-10-22 13:54:20 DBG]   - !game
[2025-10-22 13:54:20 INF] === Configuration Loaded ===
[2025-10-22 13:54:20 INF] Twitch Bot Username: decatrontest
[2025-10-22 13:54:20 INF] Twitch Client ID: td8vr15lzmvbei4qj4bbd3u4m5jovu
[2025-10-22 13:54:20 INF] Channel ID: 
[2025-10-22 13:54:20 INF] EventSub Webhook URL: https://localhost:7282/api/eventsub/webhook
[2025-10-22 13:54:20 INF] ===========================
[2025-10-22 13:54:20 INF] === APLICACIÓN LISTA ===
[2025-10-22 13:54:20 INF] Application ready, listening on configured ports
[2025-10-22 13:54:20 INF] EventSub configurado para webhooks en: /api/eventsub/webhook
[2025-10-22 13:54:20 INF] Endpoints de debug disponibles:
[2025-10-22 13:54:20 INF]   - GET /debug/ping
[2025-10-22 13:54:20 INF]   - GET /debug/controllers
[2025-10-22 13:54:20 INF]   - GET /api/eventsub/test (si TestEventSubController está funcionando)
[2025-10-22 13:54:20 INF] ========================
[2025-10-22 13:54:20 INF] Iniciando TwitchBotService...
[2025-10-22 13:54:20 WRN] TwitchBotService ya está en ejecución
[2025-10-22 13:54:20 INF] Token del bot obtenido desde BD: 8a075o60ya...
[2025-10-22 13:54:20 INF] TwitchBotService inicializado - Bot: decatrontest
[2025-10-22 13:54:21 INF] Index page accessed
[2025-10-22 13:54:21 INF] Cliente Twitch conectado exitosamente
[2025-10-22 13:54:21 INF] Found 1 channels with bot enabled
[2025-10-22 13:54:21 INF] Conectando a 1 canales desde configuración de settings
[2025-10-22 13:54:21 DBG] Micro comando registrado: !jc -> just chatting para canal decatheonlyone
[2025-10-22 13:54:21 DBG] Micro comando registrado: !js -> just chatting para canal anthonydeca
[2025-10-22 13:54:21 DBG] Micro comando registrado: !fsdg -> sgdf para canal anthonydeca
[2025-10-22 13:54:21 DBG] Micro comando registrado: !sdfg -> sdfg para canal anthonydeca
[2025-10-22 13:54:21 DBG] Micro comando registrado: !sdgf -> sdfg para canal anthonydeca
[2025-10-22 13:54:21 DBG] Micro comando registrado: !ssdfgdfs -> sdfgdf para canal anthonydeca
[2025-10-22 13:54:21 DBG] Micro comando registrado: !sdfgdf -> fdsgdf para canal anthonydeca
[2025-10-22 13:54:21 DBG] Micro comando registrado: !dfsgsdfg -> dfsgdfg para canal anthonydeca
[2025-10-22 13:54:21 INF] Micro comandos cargados: 8
[2025-10-22 13:54:21 INF] Conectado al canal: decatheonlyone
[2025-10-22 13:54:21 INF] Bot conectado a 1 canales habilitados
[2025-10-22 13:54:21 INF] TwitchBotService iniciado correctamente
[2025-10-22 13:54:22 INF] IRC conectado exitosamente
[2025-10-22 13:54:22 INF] Bot unido al canal: decatheonlyone
[2025-10-22 13:54:23 INF] Settings page loaded for user: anthonydeca
[2025-10-22 13:54:23 INF] Settings page loaded for user: anthonydeca
[2025-10-22 13:54:23 INF] Settings page loaded for user: anthonydeca
[2025-10-22 13:54:24 INF] User 1 can manage 1 channels
